<head>
  {% load django_simple_bulma %}
  {% bulma %}
  {% load static %} 
</head>

<body class= "mt-6  has-background-success-light" >   
  {% include 'barraAdminPrincipal.html' %}

  <div class="section pl-6 pb-0 pr-0 pt-4  mt-0 mr-0 mb-0 mt-6" style="background-color: rgb(255, 255, 255) ;border-color: rgb(255, 255, 255)  ;height: 50px" >
    <p><b > &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp <u>TURNOS PENDIENTES: </u></b></p>
  </div>
  <div class="is-flex  is-justify-content-space-around  " style="background-color: rgb(255, 255, 255) ;">
  <form action="/asignarTurnos/{{fecha}}/{{pagina.number}}/{{filtro}}" method="post">
    {% csrf_token %}
    <table class="table" >
      <thead>
        <tr>
          <th><a href="http://127.0.0.1:8000/turnosParaAsignar/nombre/{{pagina.number}}" target="_self">Nombre</a></th>
          <th><a href="http://127.0.0.1:8000/turnosParaAsignar/centro/{{pagina.number}}" target="_self">Centro</a></th>
          <th><a href="http://127.0.0.1:8000/turnosParaAsignar/vacuna/{{pagina.number}}" target="_self">Vacuna</a></th>
          <th><a href="http://127.0.0.1:8000/turnosParaAsignar/edad/{{pagina.number}}" target="_self">Edad</a></th>
          <th><a href="http://127.0.0.1:8000/turnosParaAsignar/fecha/{{pagina.number}}" target="_self">Fecha de peticion</a></th>

          {% if fecha %}
          <th>Asignar para {{fecha}}</th>
          {% else %}
          <th>Seleccione una fecha</th>
          {% endif %}
        </tr>
      </thead>
      <tbody>
    {% for turno in pagina %}

      <tr>
        <th>{{turno.patient.surname}} {{turno.patient.name}}</th>
        <td>{{turno.center.name}}</td>
        <td>{{turno.vaccine.name}}</td>
        <td>{{turno.edad}}</td>
        <td>{{turno.initialDate}}</td>

        {% if fecha %}
        <td><label class="checkbox">
          <input type="checkbox" name="turnos[]" value="{{turno.id}}">
          Seleccionar
        </label>
        </td>
        {% else %}
        <td><label class="checkbox" disabled>
          <input type="checkbox" disabled>
          Seleccionar
        </label>
        </td>
        {% endif %}

      </tr>
      {% empty %}
      <td><b> No hay turnos pendientes </b></td>
    {% endfor %}
      </tbody>
    </table>
    {% if fecha %}
    <button class="button" type="submit">Asignar Turnos</button>  
    {% endif %}
  </form>
  <form class="mt-2 pl-2" action="http://127.0.0.1:8000/turnosParaAsignar/{{filtro}}/{{pagina.number}}/" method="post">
    {% csrf_token %}
    <div class="field">
      {% if fecha %}
      <input class="input is-primary is-focused" type="date" placeholder="DD/MM/AAAA" value="{{fecha}}" name="fecha">
      {% else %}
      <input class="input is-primary is-focused" type="date" placeholder="DD/MM/AAAA" name="fecha" required>
      {% endif %}
      
      {% include 'messages.html' %}
    </div>
  <button class="button" type="submit">Seleccionar Fecha</button>
 </form>
 </div>
  <div class="" style="background-color: rgb(255, 255, 255); ">
   {% if cantidades %}
   <div class="section pl-6 pb-0 pr-0 pt-4  mt-0 mr-0 mb-0 " style=" background-color: rgb(255, 255, 255)  ;height: 50px;" >
    <p><b > &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp <u>INFORMACION PARA ESE DIA: </u></b></p>
   </div>
    {% for centro,vacs in cantidades.items %}
      <div class="box ml-5 pl-5 mr-5 mt-3 mb-4 pb-1" style="background-color: rgb(255, 255, 255); float: left; width: 20%; "  >
      <p class="is-size-3 is-bold">{{ centro }}</p>
        {% for vac in vacs %}
          <p class="is-size-5">{{ vac }}</p>
        {% endfor %}
      </div>  
    {% endfor %}
   {% endif %}
  </div>
  <div class=" pl-5 mb-0 pr-0 pb-4 pt-0 ml-0 mt-0 mr-0  " style="float: left   ;background-color: rgb(255, 255, 255) ;border-color: rgb(255, 255, 255) ; height: 7% ; width: 100%;" >
    {% for pagina in paginas %}
   <a class="button" href="http://127.0.0.1:8000/turnosParaAsignar/{{filtro}}/{{pagina.number}}">{{pagina.number}}</a>
    {% endfor %}
  </div>

</body>